@use '../settings/spacings' as *;
@use '../tools/rtl' as *;

$gutterKeys: (('m', 'margin'), ('p', 'padding'));
$gutters: (
  ('0', 0),
  ('0', $spacing-00),
  ('1', $spacing-01),
  ('2', $spacing-02),
  ('3', $spacing-03),
  ('4', $spacing-04),
  ('5', $spacing-05),
  ('6', $spacing-06),
  ('7', $spacing-07),
  ('8', $spacing-08),
  ('9', $spacing-09),
  ('10', $spacing-10),
  ('11', $spacing-11),
  ('12', $spacing-12)
);
$positions: (('t', 'top'), ('b', 'bottom'));
$rtlPositions: (('r', 'right'), ('l', 'left'));

@mixin setGutters($viewportSuffix: '') {
  @if $viewportSuffix != '' {
    $viewportSuffix: '-' + #{$viewportSuffix};
  }

  @each $size in $gutters {
    $sizeKey: nth($size, 1);
    $sizeValue: nth($size, 2);

    @each $gutterKey in $gutterKeys {
      $gutterKeyName: nth($gutterKey, 1);
      $gutterKeyValue: nth($gutterKey, 2);

      .#{$gutterKeyName}#{x}--#{$sizeKey}#{$viewportSuffix} {
        #{$gutterKeyValue}-left: $sizeValue !important;
        #{$gutterKeyValue}-right: $sizeValue !important;
      }

      .#{$gutterKeyName}#{y}--#{$sizeKey}#{$viewportSuffix} {
        #{$gutterKeyValue}-top: $sizeValue !important;
        #{$gutterKeyValue}-bottom: $sizeValue !important;
      }

      .#{$gutterKeyName}--#{$sizeKey}#{$viewportSuffix} {
        #{$gutterKeyValue}: $sizeValue !important;
      }

      @each $position in $positions {
        $posKey: nth($position, 1);
        $posValue: nth($position, 2);

        .#{$gutterKeyName}#{$posKey}--#{$sizeKey}#{$viewportSuffix} {
          #{$gutterKeyValue}-#{$posValue}: $sizeValue !important;
        }
      }

      @each $position in $rtlPositions {
        $posKey: nth($position, 1);
        $posValue: nth($position, 2);

        .#{$gutterKeyName}#{$posKey}--#{$sizeKey}#{$viewportSuffix} {
          @include isLtr() {
            #{$gutterKeyValue}-#{$posValue}: $sizeValue !important;
          }

          @include isRtl() {
            @if ($posValue == 'left') {
              #{$gutterKeyValue}-right: $sizeValue !important;
            }

            @if ($posValue == 'right') {
              #{$gutterKeyValue}-left: $sizeValue !important;
            }
          }
        }
      }
    }
  }
}
